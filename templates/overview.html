<div class="ecl-container">
	<div class="ecl-row">
		<div class="ecl-col-12">

			<div ng-switch on="overviewView">
				<div ng-switch-when="priorityOverview">
					<h2 class="ecl-u-type-heading-2">
						Priority Datasets - EU & EFTA Country overview
					</h2>
				</div>
				<div ng-switch-default>
					<h2 class="ecl-u-type-heading-2">
						INSPIRE Datasets - EU & EFTA Country overview
					</h2>
				</div>
			</div>

			<div ng-if="selectedTheme != 'none'">

				<div class="fnbig">
					Datasets by <span class="text-white badge bg-dark">Theme: <img class="countryFlag"
							ng-src="../../catalog/views/inspireportal/images/{{selectedTheme}}.svg"
							id="dataFlag_{{selectedTheme}}" alt="dataFlag" />
						<span id="dataCountry">{{decodeItem(selectedTheme,'themes')}}</span>
					</span>

				</div>
			</div>

			<div ng-if="selectedLegislation != 'none'">
				<div class="fnbig">
					<!--Priority--> Datasets by

					<span class="text-white badge bg-dark">Legislation:
						<span id="dataCountry">{{decodeItem(selectedLegislation,'legislations')}}</span>
					</span>

				</div>
			</div>

			<div ng-if="selectedEnvDomain != 'none' && basedomain == 1">
				<div class="fnbig">
					<!--Priority--> Datasets by
					<span class="text-white badge bg-dark">Environmental Domain:
						<span id="dataCountry">
							{{selectedEnvDomain.toUpperCase()}}
						</span>
					</span>

				</div>
			</div>

			<div ng-if="iacstype != 'none'">
				<div class="fnbig">
					Datasets by
					<span class="text-white badge bg-dark">IACS:
						<span id="dataCountry">{{iacstype.toUpperCase()}}</span>
					</span>

					<br />
				</div>
			</div>

			<div ng-if="selectedEnvDomain != 'none'  && basedomain == 0">
				<div class="fnbig">
					<!--Priority--> Datasets by
					<span class="text-white badge bg-dark">Environmental Domain:
						<i ng-if="decodeCategory(selectedEnvDomain,'envdomains') == 'AIR'"
							class="fa fa-paper-plane textWhite"></i>
						<i ng-if="decodeCategory(selectedEnvDomain,'envdomains') == 'NATURE'"
							class="fa fa-leaf textWhite"></i>
						<i ng-if="decodeCategory(selectedEnvDomain,'envdomains') == 'WATER'"
							class="fa fa-tint textWhite"></i>
						<i ng-if="decodeCategory(selectedEnvDomain,'envdomains') == 'NOISE'"
							class="fa fa-volume-up textWhite"></i>
						<i ng-if="decodeCategory(selectedEnvDomain,'envdomains') == 'WASTE'"
							class="fa fa-trash textWhite"></i>
						<i ng-if="decodeCategory(selectedEnvDomain,'envdomains') == 'INDUSTRIAL-EMISSIONS'"
							class="fa fa-smog textWhite"></i>
						<i ng-if="decodeCategory(selectedEnvDomain,'envdomains') == 'INDUSTRIAL-ACCIDENTS'"
							class="fa fa-industry textWhite"></i>
						<span id="dataCountry">{{decodeCategory(selectedEnvDomain,'envdomains')}}</span>
					</span>

					<span class="text-white badge bg-primary">Dataset:
						<span id="dataCountry">{{decodeItem(selectedEnvDomain,'envdomains')}}</span>
					</span>

				</div>
			</div>

			<div class="ecl-row">
				<div class="ecl-col-12 ecl-col-m-6 ecl-col-l-8">
					<br /> <br />
					<div id="mapOverview">

					</div>
				</div>

				<div class="ecl-col-12 ecl-col-m-6 ecl-col-l-4">
					<h2 class="ecl-u-type-heading-3">Geoportal<br /> Dataset Statistics</h2>
					<button type="submit"
						ng-class="overviewMapType == 'Metadata' ? 'ecl-button--primary' : 'ecl-button--secondary'"
						class="ecl-button countryBigButtons" ng-click="changeOverviewMapType('Metadata')"><i
							class="fa fa-file" aria-hidden="true"></i> <span id="overview_TOT_MT"> </span>
						<br />Metadata records</button>
						<br />
					<br />
					<button type="submit"
						ng-class="overviewMapType == 'Downloadable' ? 'ecl-button--primary' : 'ecl-button--secondary'"
						class="ecl-button countryBigButtons" ng-click="changeOverviewMapType('Downloadable')"><i
							class="fa fa-download"></i> <span id="overview_TOT_DW"> </span><br />Downloadable Datasets</button>
					<br />
					<br />
					<button type="submit"
						ng-class="overviewMapType == 'Viewable' ? 'ecl-button--primary' : 'ecl-button--secondary'"
						class="ecl-button countryBigButtons" ng-click="changeOverviewMapType('Viewable')"><i
							class="fa fa-eye" aria-hidden="true"></i> <span id="overview_TOT_VW"> </span><br />Viewable Datasets</button>
					<br />
					<br />

					<span class="ecl-checkbox__text">Spatial scope coverage:<br><br></span>

					<div class="ecl-checkbox ecl-checkbox-custom">
						<input type="checkbox" name="checkbox-default" class="ecl-checkbox__input" value="national"
							id="checkbox-national-overview" ng-click="updateOverviewPage();" />
						<label for="checkbox-national-overview" class="ecl-checkbox__label">
							<span class="ecl-checkbox__box">
								<svg class="ecl-icon ecl-icon--m ecl-checkbox__icon" focusable="false"
									aria-hidden="true">
									<use
										xlink:href="../../catalog/views/inspireportal/component-library/dist/sprites/icons.svg#check">
									</use>
								</svg>
							</span>
							<i class="fa fa-flag text-primary ecl-color fa-custom" aria-hidden="true" data-toggle="tooltip"
								data-placement="top" title="National"></i>
							<span class="ecl-checkbox__text"> National</span>
						</label>
					</div>

					<div class="ecl-checkbox ecl-checkbox-custom">
						<input type="checkbox" name="checkbox-default" class="ecl-checkbox__input" value="regional"
							id="checkbox-regional-overview" ng-click="updateOverviewPage();" />
						<label for="checkbox-regional-overview" class="ecl-checkbox__label">
							<span class="ecl-checkbox__box">
								<svg class="ecl-icon ecl-icon--m ecl-checkbox__icon" focusable="false"
									aria-hidden="true">
									<use
										xlink:href="../../catalog/views/inspireportal/component-library/dist/sprites/icons.svg#check">
									</use>
								</svg>
							</span>
							<i class="fa fa-flag-o text-primary ecl-color fa-custom" aria-hidden="true" data-toggle="tooltip"
								data-placement="top" title="Regional"></i>
							<span class="ecl-checkbox__text"> Regional</span>
						</label>
					</div>

				</div>
			</div>

			<div class="ecl-row margin-top-20">

				<div class="col-s-12 col-md-6  col-lg-33">
				</div>
				<div class="col-s-12 col-md-6  col-lg-33">
					<div class="col-xl ">
						<h3 class=" ecl-u-type-heading-3">Select a country</h3>
					</div>
				</div>

				<div class="col-s-12 col-md-6 col-lg-33">
				</div>
			</div>

			<div class="ecl-row padding-top-20">

				<!-- display on three columns, countryColumnsArray contains 3 elements  -->
				<div class="ecl-content-item-block__item ecl-u-mb-l ecl-col-12 ecl-col-l-4 last-item-column"
					ng-repeat="n in countryColumnsArray"
					ng-init="outerIndex = $index">

					<table>
						<thead class="hidden"><tr><th>1</th><th>2</th><th>3</th></tr></thead>
						<tbody>

							<!-- repeat pattern only for valid countries (selectedCountries). Repeat: 
								FROM: 0 or the next element after the last outer cycle (example: 0 elements, or 2 (outerIndex) *11 (max elements per column) = index 22)) 
								TO: the limit of the column container (example: 11), or the elements remaining (example: last column is 9 elements instead of the usual 11)
							-->
							<tr ng-repeat="country in countriesFiltered = (countries.data | filter: { valid: selectedCountries }:containsComparator) | limitTo:getColumnLengthLimit(countryColumnsArray.length, countriesFiltered.length, outerIndex):(getColumnLengthLimit(countryColumnsArray.length, countriesFiltered.length)*(outerIndex)) "
								ng-init="innerIndex = $index" class="border-bottom-white-1">
								<td class="padding-1 country-flag" align="left" >
									<img class="countryFlag" ng-src="../../catalog/views/inspireportal/images/flags/{{country.id}}.svg"
										alt="countryId" width="16px" height="16px" />
								</td>
								
								<td class="padding-1 country-name" align="left" ng-click="checkResultsNumber(country.id)">
									<a href="../../srv/eng/catalog.search#/results?country={{country.id}}&view={{overviewView}}&theme={{selectedTheme}}&iacs={{iacstype}}&legislation={{selectedLegislation}}&envdomain={{selectedEnvDomain}}&&basedomain={{basedomain}}">
										{{country.label}} </a>
								</td>
								
								<td class="padding-0 data-set" align="right" ng-click="checkResultsNumber(country.id)">
									<a href="../../srv/eng/catalog.search#/results?country={{country.id}}&view={{overviewView}}&theme={{selectedTheme}}&iacs={{iacstype}}&legislation={{selectedLegislation}}&envdomain={{selectedEnvDomain}}&&basedomain={{basedomain}}">
										
										<i class="fa fa-eye text-primary ecl-color float-right" aria-hidden="true"
											data-toggle="tooltip" data-placement="top" title="Viewable"></i>
										<span class="statsThemeSelectionBox_lyCount_ad countryLabel overview-results"
											id="overview_{{country.id}}_VW"> </span>
										
										<span class="overview-results"> | </span>
										
										<i class="fa fa-download text-primary ecl-color float-right" aria-hidden="true"
											data-toggle="tooltip" data-placement="top" title="Downloadable"></i>
										<span class="statsThemeSelectionBox_dwCount_ad countryLabel overview-results"
											id="overview_{{country.id}}_DW">
										</span>

										<span class="overview-results"> | </span>

										<i class="fa fa-file text-primary ecl-color float-right" aria-hidden="true"
											data-toggle="tooltip" data-placement="top" title="Metadata"></i>
										<span class="statsThemeSelectionBox_mdCount_ad countryLabel overview-results"
											id="overview_{{country.id}}_MT">
										</span>

									</a>
								</td>
							</tr>
						</tbody>
					</table>

				</div>

			</div>
			<br />

			<div class="ecl-row margin-top-20">

				<div class="col-s-12 col-md-6  col-lg-30">
				</div>
				<div class="col-s-12 col-md-6  col-lg-40">
					<div class="col-xl ">
						<h3 class=" ecl-u-type-heading-3">Select the whole<a
								href="../../srv/eng/catalog.search#/results?country=eu&view={{overviewView}}&theme={{selectedTheme}}&iacs={{iacstype}}&legislation={{selectedLegislation}}&envdomain={{selectedEnvDomain}}&&basedomain={{basedomain}}">&nbsp;<img
									class="countryFlagBig" alt="countryFlag"
									src="../../catalog/views/inspireportal/images/flags/eu.svg" /> EUROPE</a> </h3>
					</div>
				</div>

				<div class="col-s-12 col-md-6 col-lg-30">

					<button class="ecl-button ecl-button--cta ecl-button-custom" type="submit" ng-click="exportcsv()">
						<span class="ecl-button__container">
							<span class="ecl-button__label" data-ecl-label="true">Download stats</span>
							<svg class="ecl-icon ecl-icon--xs ecl-icon--rotate-90 ecl-button__icon ecl-button__icon--after"
								focusable="false" aria-hidden="true" data-ecl-icon="">
								<use xlink:href="../../catalog/views/inspireportal/images/icons.svg#corner-arrow"></use>
							</svg>
						</span>
					</button>
				</div>
			</div>
		</div>

	</div>
</div>
